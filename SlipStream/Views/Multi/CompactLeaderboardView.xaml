<UserControl x:Class="SlipStream.Views.Multi.CompactLeaderboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:SlipStream.Views.Multi"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="375">
    <Border Style="{StaticResource DisplayBoxTheme}" Grid.RowSpan="2">

        <Grid>

            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition/>
            </Grid.RowDefinitions>

            <Border Background="#FF1B2E3A" CornerRadius="25,25,0,0" 
                    Grid.ColumnSpan="2">

                <Grid>

                    <Grid.RowDefinitions>
                        <RowDefinition Height="50"/>
                        <RowDefinition Height="35"/>
                        <RowDefinition Height="30"/>
                    </Grid.RowDefinitions>

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="125"/>
                        <ColumnDefinition/>
                        <ColumnDefinition Width="75"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Text="LIVE TIMING" Margin="10" VerticalAlignment="Center" Grid.ColumnSpan="3"
                               Style="{StaticResource DisplayBoxLabelTheme}" FontSize="20"/>

                    <TextBlock Text="{Binding model.Formula}" Grid.Row="1" FontSize="18" FontWeight="Bold"/>
                    <TextBlock Text="{Binding model.CurrentSession}" Grid.Row="1" Grid.Column="1" 
                               FontSize="18" HorizontalAlignment="Center" FontWeight="Bold"/>
                    <Image Source="{Binding model.CurrentWeatherIcon}" Margin="5" Height="30"
                           RenderOptions.BitmapScalingMode="HighQuality" Grid.Row="1" Grid.Column="2"
                           HorizontalAlignment="Center"/>

                    <TextBlock Text="{Binding model.Circuit}" Grid.Row="2" Grid.ColumnSpan="3" 
                               HorizontalAlignment="Center" FontSize="14" FontWeight="Bold"/>
                </Grid>

            </Border>

            <DataGrid Background="Transparent" RowBackground="Transparent"
                      Name="CompactLeaderboard" ItemsSource="{Binding Path=Driver}"
                      GridLinesVisibility="None" IsReadOnly="True"
                      AutoGenerateColumns="False" Padding="5" HeadersVisibility="Column"
                      BorderBrush="Transparent" Grid.Row="1"
                      CanUserAddRows="False" CanUserDeleteRows="False" 
                      CanUserResizeRows="False" CanUserResizeColumns="False" SelectionUnit="Cell"
                      CellStyle="{StaticResource SmallLeaderboardCellTheme}"
                      ColumnHeaderStyle="{StaticResource SmallLeaderboardHeaderTheme}">

                <DataGrid.ItemContainerStyle>
                    <Style TargetType="DataGridRow">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding CarPosition}"  Value="0">
                                <Setter Property="Visibility" Value="Collapsed" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </DataGrid.ItemContainerStyle>

                <DataGrid.Columns>
                    <DataGridTextColumn Binding="{Binding CarPosition}" Header="POS" Width="50" SortDirection="Ascending"/>
                    <DataGridTextColumn Binding="{Binding DriverName}" Header="DRIVER" Width="140"/>
                    <DataGridTextColumn Binding="{Binding raceNumber}" Header="CAR" Width="50"/>
                    <DataGridTemplateColumn Header="STATUS" Width="50">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Image Source="{Binding DriverStatusSource}" Margin="5" 
                                       HorizontalAlignment="Left" Height="15"
                                       RenderOptions.BitmapScalingMode="HighQuality"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>

                <DataGrid.Resources>
                    <Style TargetType="ScrollBar" BasedOn="{StaticResource ScrollBarTheme}"/>
                    <Style TargetType="Thumb" BasedOn="{StaticResource ScrollBarThumbTheme}"/>
                </DataGrid.Resources>

            </DataGrid>

        </Grid>

    </Border>
</UserControl>
